<!DOCTYPE html>
<html>
<head>
    <title>{{ employee.name }} - @{{employee.email}}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    {% include 'navbar.html' %}
    <h1>{{ employee.name }}</h1>
    <h2>@{{ employee.email }}</h2>

    <div class="employee-profile">
        <div>
            {% if employee.picture_url %}
                <img src="{{ employee.picture_url }}" alt="Picture of {{ employee.name }}" class="employee-picture">
            {% else %}
                <p>No picture available.</p>
            {% endif %}
        </div>
        <div class="employee-info">
            <p><strong>Name:</strong> {{ employee.name }}</p>
            <p><strong>Title:</strong> {{ employee.title }}</p>
            <p><strong>Department:</strong> {{ employee.department }}</p>
            <p><strong>Phone:</strong> {{ employee.phone or 'N/A' }}</p>
            <!-- Add any other information here -->
        </div>
    </div>

    {% if manager_chain %}
    <div class="relation-section">
        <h2>Management Chain</h2>
        {% for manager in manager_chain %}
            <div class="relation-item">
                <div class="small-employee-picture-container" style="background-image: url('{{ manager.picture_url }}');"></div>
                <div class="info-section">
                    <div class="name-section">
                        <a href="{{ url_for('view_employee', id=manager.id) }}">{{ manager.name }}</a>
                    </div>
                    <div class="title-section">
                        {{ manager.title }}
                    </div>
                    <div class="department-section">
                        {{ manager.department }}
                    </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p>This employee does not report to anyone.</p>
{% endif %}

<div class="relation-section">
        <div class="relation-item">
            <div class="small-employee-picture-container" style="background-image: url('{{ employee.picture_url }}');"></div>
            <div class="info-section">
                <div class="name-section">
                    <a href="{{ url_for('view_employee', id=employee.id) }}">{{ employee.name }}</a>
                </div>
                <div class="title-section">
                    {{ employee.title }}
                </div>
                <div class="department-section">
                    {{ employee.department }}
                </div>
            </div>
        </div>
</div>

<div class="relation-section">
    <h2>Direct Reports</h2>
    {% if subordinates %}
        <ul>
            {% for subordinate in subordinates %}
            <li class="relation-item">
                <div class="small-employee-picture-container" style="background-image: url('{{ subordinate.picture_url }}');"></div>
                <div class="info-section">
                    <div class="name-section">
                        <a href="{{ url_for('view_employee', id=subordinate.id) }}">{{ subordinate.name }}</a>
                    </div>
                    <div class="title-section">
                        {{ subordinate.title }}
                    </div>
                    <div class="department-section">
                        {{ subordinate.department }}
                    </div>
                </div>
            </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>{{ employee.name }} does not have any direct reports.</p>
    {% endif %}
</div>


    <!-- Add links to edit or go back to the employee list -->
    <p><a href="{{ url_for('edit_employee', id=employee.id) }}">Edit this employee</a></p>
    <p><a href="{{ url_for('list_employees') }}">Back to employee list</a></p>
</body>
</html>